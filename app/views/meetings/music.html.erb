<div class="row">
  <div class="col-md">
    <h2 class="mt-md-4 mt-2"><strong><%= "#{@meetings_view_object.unit_name} Meetings" %></strong></h2>
  </div>
  <div class="col-md">
    <h5 class="mt-md-4 pt-md-3 text-md-end text-muted">
      <%= filtered_and_total_count(@meetings_view_object.filtered_count, @meetings_view_object.total_count, "meeting") %>
    </h5>
  </div>
</div>

<hr/>
<br/>

<div class="row">
  <div class="col-12 col-md-6 col-inline mt-1">
    <%= filter_meetings_type_dropdown(request.params, label: "Meeting Type") %>
  </div>
</div>

<hr/>

<div class="container-fluid table-responsive">
  <table class="table table-sm table-bordered">
    <thead>
    <tr>
      <th>Date</th>
      <th>Chorister</th>
      <th>Organist</th>
      <th>Opening Hymn</th>
      <th>Sacrament Hymn</th>
      <th>Closing Hymn</th>
      <th>Musical Number</th>
    </tr>
    </thead>
    <tbody>
    <% @meetings_view_object.meetings.each do |meeting| %>
      <tr>
        <td class="ps-2 pe-3 text-nowrap">
          <%= l(meeting.date, format: :rfc822) %>
          <span class="ps-1"><%= badge_for_meeting_type(meeting.meeting_type) %></span>
        </td>
        <td class="ps-2 pe-3 text-nowrap"><%= meeting.chorister_name %></td>
        <td class="ps-2 pe-3 text-nowrap"><%= meeting.organist_name %></td>
        <td class="ps-2 pe-3 text-nowrap"><%= meeting.songs.find { |song| song.song_type == "opening_hymn" }&.title %></td>
        <td class="ps-2 pe-3 text-nowrap"><%= meeting.songs.find { |song| song.song_type == "sacrament_hymn" }&.title %></td>
        <td class="ps-2 pe-3 text-nowrap"><%= meeting.songs.find { |song| song.song_type == "closing_hymn" }&.title %></td>
        <td class="ps-2 pe-3 text-nowrap"><%= meeting.songs.find { |song| song.song_type == "musical_number" }&.title %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
