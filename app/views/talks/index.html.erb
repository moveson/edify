<div class="row">
  <div class="col-md">
    <h2 class="mt-md-4 mt-2"><strong>Talks</strong></h2>
  </div>
  <div class="col-md">
    <h5 class="mt-md-4 pt-md-3 text-md-end text-muted"><%= filtered_and_total_count(@talks.count, Talk.count, "talk") %></h5>
  </div>
</div>

<hr/>

<%= search_form_for @q do |f| %>
  <div class="row">
    <div class="input-group">
      <%= f.search_field :speaker_name_cont, placeholder: "Find someone", autofocus: true, class: "form-control" %>
      <span class="input-group-append">
        <%= button_tag(type: :submit, class: 'btn btn-primary') do %>
            <i class='fas fa-search'></i>
        <% end %>
      </span>
    </div>
  </div>
<% end %>

<br/>

<div class="row">
  <div class="col col-inline">
    <div class="btn-group">
      <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Sort by
      </button>
      <ul class="dropdown-menu" aria-labelledby="sort_by">
        <li><%= link_to "Date", request.params.deep_merge(q: { s: "date desc" }), class: "dropdown-item" %></li>
        <li><%= link_to "Name", request.params.deep_merge(q: { s: "speaker_name asc" }), class: "dropdown-item" %></li>
      </ul>
    </div>
  </div>
</div>

<hr/>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
      <th></th>
      <th>Speaker Name</th>
      <th>Date</th>
      <th>Purpose</th>
      <th>Topic</th>
    </tr>
    </thead>

    <tbody>
    <% @talks.each do |talk| %>
      <%= content_tag :tr, id: dom_id(talk), class: dom_class(talk) do %>
        <td><%= link_to(fa_icon("person"), member_path(talk.member_id)) if talk.member_id? %></td>
        <td><%= talk.speaker_name %></td>
        <td><%= l(talk.date, format: :long) %></td>
        <td><%= talk.purpose %></td>
        <td><%= talk.topic_truncated %></td>
      <% end %>
    <% end %>
    </tbody>
  </table>
</div>
